---
title: OAuth介绍
toc: true
date: 2017-05-04 16:39:03
category: 
	- 技术贴
	- Java
	- 框架
tags: 
    - 认证
---

# OAuth是个啥
近日，无意中浏览技术文章，看到了一个新鲜玩意（对博主来说），OAuth2.0，起初一看介绍，以为是单点登录，后面仔细了解了下，发现平时咱们上网还经常用到这个技术，总体来说，OAuth就是一个开放标准，允许用户让第三方应用访问该用户在某一网站上存储的资源，而无需将用户名和密码提供给第三方应用的工具。说的明白点，就是咱们平时登录很多网站需要账号密码，而又觉得注册麻烦，采用qq/微信啥的一键登录这种方式，OAuth就是支持这项技术的一套标准和规范

<!--more-->
## 概念
大家有没有发现，介绍一个成熟的工具或框架，一般都会有角色的概念（如Zookeeper），这也是设计理念之一吧。

**OAuth 2.0 主要有4类角色：**

resource owner：资源所有者，指终端的“用户”（user）
resource server：资源服务器，即服务提供商存放受保护资源。访问这些资源，需要获得访问令牌（access token）。它与认证服务器，可以是同一台服务器，也可以是不同的服务器。比如，我们访问新浪博客网站，那么如果使用新浪博客的账号来登录新浪博客网站，那么新浪博客的资源和新浪博客的认证都是同一家，可以认为是同一个服务器。但是我们是新浪博客账号去登录了知乎，那么显然知乎的资源和新浪的认证不是一个服务器。
client：客户端，代表向受保护资源进行资源请求的第三方应用程序。
authorization server： 授权服务器， 在验证资源所有者并获得授权成功后，将发放访问令牌给客户端。

## 流程
借用一张图
+--------+                               +---------------+
|        |--(A)- Authorization Request ->|   Resource    |
|        |                               |     Owner     |
|        |<-(B)-- Authorization Grant ---|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(C)-- Authorization Grant -->| Authorization |
| Client |                               |     Server    |
|        |<-(D)----- Access Token -------|               |
|        |                               +---------------+
|        |
|        |                               +---------------+
|        |--(E)----- Access Token ------>|    Resource   |
|        |                               |     Server    |
|        |<-(F)--- Protected Resource ---|               |
+--------+                               +---------------+

